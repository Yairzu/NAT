<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Simulador NAT ‚Äî PRO </title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Simulador interactivo de NAT (Network Address Translation) con visualizaci√≥n en tiempo real" />
  <meta name="keywords" content="NAT, Network Address Translation, simulador, red, internet, router" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body data-mode="nat">
  <div class="container">
    <header class="toolbar" role="banner">
      <div class="title">
        <span style="font-size: var(--font-size-xxl)">üõ∞Ô∏è Simulador de NAT ‚Äî PRO</span>
        <span class="pill">Conexi√≥n a Internet perfecta</span>
      </div>
      <div class="actions">
        <div class="mode-switch" role="tablist" aria-label="Seleccionar modo de simulaci√≥n">
          <button id="btnNat" class="mode-btn active" role="tab" aria-selected="true" aria-controls="simulation-content">
            Con NAT
          </button>
          <button id="btnNoNat" class="mode-btn" role="tab" aria-selected="false" aria-controls="simulation-content">
            Sin NAT
          </button>
        </div>
        <button id="btnSim" class="btn primary" aria-describedby="sim-description">
          ‚ñ∂ Ejecutar simulaci√≥n
        </button>
        <button id="btnClear" class="btn" aria-describedby="clear-description">
          üßπ Limpiar
        </button>
      </div>
    </header>

    <main class="grid" id="simulation-content">
      <section class="card" aria-labelledby="vizTitle">
        <h3 id="vizTitle">Visualizaci√≥n de la red</h3>
        <div class="viz-wrap" id="viz" role="img" aria-label="Topolog√≠a de red con dispositivos, router e Internet">
          <div class="viz-bg"></div>
          <div class="viz-grid"></div>
          <div class="legend" role="list" aria-label="Leyenda de estados">
            <div class="dot t" role="listitem"></div>
            <span>Traducci√≥n NAT</span>
            <div class="dot ok" role="listitem"></div>
            <span>Entrega OK</span>
            <div class="dot bad" role="listitem"></div>
            <span>Bloqueado</span>
          </div>

          <svg viewBox="0 0 1300 600" xmlns="http://www.w3.org/2000/svg" aria-label="Topolog√≠a de red">
            <defs>
              <linearGradient id="gradAccent" x1="0%" y1="0%" x2="100%" y2="0%">
                <stop offset="0%" stop-color="var(--accent)"/>
                <stop offset="100%" stop-color="var(--accent-2)"/>
              </linearGradient>
              <filter id="glowAccent" x="-50%" y="-50%" width="200%" height="200%">
                <feGaussianBlur stdDeviation="2.2" result="coloredBlur"/>
                <feMerge>
                  <feMergeNode in="coloredBlur"/>
                  <feMergeNode in="SourceGraphic"/>
                </feMerge>
              </filter>
            </defs>

            <g id="paths">
              <!-- Rutas desde dispositivos al router -->
              <path id="p1" class="link" d="M 230 112 C 350 150 450 200 600 300" aria-label="Conexi√≥n dispositivo 1 a router"/>
              <path id="p2" class="link" d="M 230 192 C 350 220 450 250 600 300" aria-label="Conexi√≥n dispositivo 2 a router"/>
              <path id="p3" class="link" d="M 230 272 C 350 280 450 280 600 300" aria-label="Conexi√≥n dispositivo 3 a router"/>
              <path id="p4" class="link" d="M 230 352 C 350 340 450 320 600 300" aria-label="Conexi√≥n dispositivo 4 a router"/>
              <path id="p5" class="link" d="M 230 432 C 350 380 450 340 600 300" aria-label="Conexi√≥n dispositivo 5 a router"/>
              <path id="p6" class="link" d="M 230 512 C 350 420 450 360 600 300" aria-label="Conexi√≥n dispositivo 6 a router"/>
              <path id="p7" class="link" d="M 230 592 C 350 460 450 380 600 300" aria-label="Conexi√≥n dispositivo 7 a router"/>
              <!-- Ruta del router a Internet -->
              <path id="pr" class="link" d="M 720 300 C 800 300 850 300 950 300" aria-label="Conexi√≥n router a Internet"/>
            </g>

            <!-- Columna Izquierda - Dispositivos 1-4 -->
            <g id="dev1" class="node" transform="translate(50,80)" role="group" aria-label="Laptop Oficina">
              <rect rx="14" ry="14" width="180" height="65"/>
              <text class="label" x="16" y="28" data-max="148">üíª Laptop Oficina</text>
              <text class="sub" x="16" y="48" id="dev1Ip">IP: ‚Äì</text>
            </g>
            <g id="dev2" class="node" transform="translate(50,160)" role="group" aria-label="PC Escritorio">
              <rect rx="14" ry="14" width="180" height="65"/>
              <text class="label" x="16" y="28" data-max="148">üñ•Ô∏è PC Escritorio</text>
              <text class="sub" x="16" y="48" id="dev2Ip">IP: ‚Äì</text>
            </g>
            <g id="dev3" class="node" transform="translate(50,240)" role="group" aria-label="Smartphone">
              <rect rx="14" ry="14" width="180" height="65"/>
              <text class="label" x="16" y="28" data-max="148">üì± Smartphone</text>
              <text class="sub" x="16" y="48" id="dev3Ip">IP: ‚Äì</text>
            </g>
            <g id="dev4" class="node" transform="translate(50,320)" role="group" aria-label="Smart TV">
              <rect rx="14" ry="14" width="180" height="65"/>
              <text class="label" x="16" y="28" data-max="148">üì∫ Smart TV</text>
              <text class="sub" x="16" y="48" id="dev4Ip">IP: ‚Äì</text>
            </g>
            <!-- Columna Derecha - Dispositivos 5-7 -->
            <g id="dev5" class="node" transform="translate(50,400)" role="group" aria-label="Impresora WiFi">
              <rect rx="14" ry="14" width="180" height="65"/>
              <text class="label" x="16" y="28" data-max="148">üñ®Ô∏è Impresora WiFi</text>
              <text class="sub" x="16" y="48" id="dev5Ip">IP: ‚Äì</text>
            </g>
            <g id="dev6" class="node" transform="translate(50,480)" role="group" aria-label="Tablet">
              <rect rx="14" ry="14" width="180" height="65"/>
              <text class="label" x="16" y="28" data-max="148">üì± Tablet</text>
              <text class="sub" x="16" y="48" id="dev6Ip">IP: ‚Äì</text>
            </g>
            <g id="dev7" class="node" transform="translate(50,560)" role="group" aria-label="Servidor Local">
              <rect rx="14" ry="14" width="180" height="65"/>
              <text class="label" x="16" y="28" data-max="148">üñ•Ô∏è Servidor Local</text>
              <text class="sub" x="16" y="48" id="dev7Ip">IP: ‚Äì</text>
            </g>

            <g id="router" class="node router" transform="translate(600,300)" role="group" aria-label="Router con NAT">
              <rect rx="18" ry="18" width="120" height="120"/>
              <text class="label" x="24" y="48">ROUTER</text>
              <text class="sub" x="20" y="72" id="routerNat">NAT: ON</text>
              <text class="sub" x="20" y="92" id="routerPub">IP P√∫blica: ‚Äì</text>
            </g>

            <g id="internet" class="node internet" transform="translate(950,300)" role="group" aria-label="Internet y servicios">
              <ellipse rx="100" ry="60"/>
              <text class="label" x="-35" y="5">INTERNET</text>
              <text class="sub" x="-64" y="25">Servicios / Destinos</text>
            </g>
          </svg>
        </div>
      </section>

      <aside class="stack">
        <section class="card" aria-labelledby="infoTitle">
          <h3 id="infoTitle">Informaci√≥n de la simulaci√≥n</h3>
          <div class="kv">
            <div class="item">
              <span class="k">Modo</span>
              <span class="v" id="kvModo">Con NAT</span>
            </div>
            <div class="item">
              <span class="k">IP P√∫blica</span>
              <span class="v" id="kvPub">‚Äì</span>
            </div>
            <div class="item">
              <span class="k">Traducciones</span>
              <span class="v" id="kvPairs">0</span>
            </div>
            <div class="item">
              <span class="k">Dispositivos</span>
              <span class="v" id="kvDevs">0</span>
            </div>
          </div>
          <p class="hint" id="kvHint">
            En NAT, m√∫ltiples IP privadas comparten una IP p√∫blica usando puertos diferentes (PAT).
          </p>
        </section>

        <section class="card" aria-labelledby="natTableTitle">
          <h3 id="natTableTitle">Tabla de traducci√≥n (NAT)</h3>
          <table class="mini-table" id="natTable" role="table" aria-label="Tabla de traducciones NAT">
            <thead>
              <tr>
                <th scope="col">Privada:Puerto</th>
                <th scope="col">‚Üí</th>
                <th scope="col">P√∫blica:Puerto</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td colspan="3" style="color: var(--muted); padding: 12px">
                  Sin datos a√∫n
                </td>
              </tr>
            </tbody>
          </table>
          <p class="hint">
            En modo <b>Sin NAT</b> las IP privadas (RFC1918) no son ruteables en Internet.
          </p>
        </section>
      </aside>
    </main>

    <section class="table-wrap" aria-labelledby="tblTitle">
      <h3 id="tblTitle" class="sr-only">Resultados de la simulaci√≥n</h3>
      <table id="tabla" role="table" aria-label="Resultados detallados de la simulaci√≥n">
        <thead>
          <tr>
            <th scope="col">Dispositivo</th>
            <th scope="col">IP Privada</th>
            <th scope="col">Solicitud</th>
            <th scope="col">IP P√∫blica Asignada</th>
            <th scope="col">Puerto</th>
            <th scope="col">Respuesta</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>

    <div class="mode-badge" id="modeBadge" role="status" aria-live="polite">Con NAT</div>
  </div>

  <div class="sr-only">
    <div id="sim-description">Ejecuta una nueva simulaci√≥n con los dispositivos seleccionados</div>
    <div id="clear-description">Limpia todos los resultados y reinicia la simulaci√≥n</div>
  </div>

  <script type="module" src="main.js"></script>
</body>
</html>
